<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sichao.userService.mapper.UserFollowMapper">
    <!--查看用户关注列表-->
    <select id="getFollowingList" resultType="com.sichao.userService.entity.vo.FollowListVo">
        SELECT id,nickname,gender,avatar_url,sign,
               (SELECT count(1)FROM user_follow
                WHERE follower_id = #{currentId} AND following_id = u.id AND status=1) currentIdIsFollow
        FROM `user` u
        WHERE id IN (SELECT following_id FROM `user_follow` WHERE follower_id = #{id}  AND status=1)
    </select>
    <!--查看用户粉丝列表-->
    <select id="getFollowerList" resultType="com.sichao.userService.entity.vo.FollowListVo">
        SELECT id,nickname,gender,avatar_url,sign,
               (SELECT count(1) FROM user_follow
                WHERE follower_id = #{currentId} AND following_id=u.id and status=1) currentIdIsFollow
        FROM `user` u
        WHERE id IN (SELECT follower_id FROM `user_follow` WHERE following_id = #{id} and status=1)
    </select>
</mapper>
